<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>页面性能优化 | LinHuijuan&#39;s Blog</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="Stay Hungry">
    
    <link rel="preload" href="/assets/css/0.styles.aadc6af7.css" as="style"><link rel="preload" href="/assets/js/app.9887eeef.js" as="script"><link rel="preload" href="/assets/js/3.eb4fdeb6.js" as="script"><link rel="preload" href="/assets/js/1.3b8e8362.js" as="script"><link rel="preload" href="/assets/js/21.c982c0e9.js" as="script"><link rel="prefetch" href="/assets/js/10.157f9d61.js"><link rel="prefetch" href="/assets/js/100.6fd9f3ce.js"><link rel="prefetch" href="/assets/js/101.b5fc313f.js"><link rel="prefetch" href="/assets/js/102.f6faf6be.js"><link rel="prefetch" href="/assets/js/103.540e5921.js"><link rel="prefetch" href="/assets/js/104.8a309194.js"><link rel="prefetch" href="/assets/js/105.989c0566.js"><link rel="prefetch" href="/assets/js/106.3f6fcf79.js"><link rel="prefetch" href="/assets/js/107.c38b1d51.js"><link rel="prefetch" href="/assets/js/108.6f90e1c3.js"><link rel="prefetch" href="/assets/js/109.e1f66180.js"><link rel="prefetch" href="/assets/js/11.dfeb4f1f.js"><link rel="prefetch" href="/assets/js/110.33762398.js"><link rel="prefetch" href="/assets/js/111.2917eb59.js"><link rel="prefetch" href="/assets/js/112.e8661a32.js"><link rel="prefetch" href="/assets/js/113.acfdffe0.js"><link rel="prefetch" href="/assets/js/114.0c56ce93.js"><link rel="prefetch" href="/assets/js/115.ca86eac5.js"><link rel="prefetch" href="/assets/js/116.1c652c23.js"><link rel="prefetch" href="/assets/js/117.b302ba4d.js"><link rel="prefetch" href="/assets/js/118.ece4a557.js"><link rel="prefetch" href="/assets/js/119.5bc9c527.js"><link rel="prefetch" href="/assets/js/12.f0693a55.js"><link rel="prefetch" href="/assets/js/120.b890a9d3.js"><link rel="prefetch" href="/assets/js/121.2176093a.js"><link rel="prefetch" href="/assets/js/122.56276322.js"><link rel="prefetch" href="/assets/js/123.8add82de.js"><link rel="prefetch" href="/assets/js/124.9c7a6631.js"><link rel="prefetch" href="/assets/js/125.42069475.js"><link rel="prefetch" href="/assets/js/126.6a960299.js"><link rel="prefetch" href="/assets/js/127.0dd14ed3.js"><link rel="prefetch" href="/assets/js/128.c1f2e91f.js"><link rel="prefetch" href="/assets/js/129.f3bdf784.js"><link rel="prefetch" href="/assets/js/13.8e53f482.js"><link rel="prefetch" href="/assets/js/130.62f9e322.js"><link rel="prefetch" href="/assets/js/131.68d91a6a.js"><link rel="prefetch" href="/assets/js/132.99896201.js"><link rel="prefetch" href="/assets/js/133.c60f1393.js"><link rel="prefetch" href="/assets/js/134.7c69fd11.js"><link rel="prefetch" href="/assets/js/135.e6bcc2c5.js"><link rel="prefetch" href="/assets/js/136.f12f8557.js"><link rel="prefetch" href="/assets/js/137.25ca0d7e.js"><link rel="prefetch" href="/assets/js/138.cabd4e49.js"><link rel="prefetch" href="/assets/js/139.a0a79d15.js"><link rel="prefetch" href="/assets/js/14.c9631346.js"><link rel="prefetch" href="/assets/js/140.ad703d65.js"><link rel="prefetch" href="/assets/js/141.082b6de2.js"><link rel="prefetch" href="/assets/js/142.8ccdffc2.js"><link rel="prefetch" href="/assets/js/143.25f0353b.js"><link rel="prefetch" href="/assets/js/144.74bc0dff.js"><link rel="prefetch" href="/assets/js/145.438767b8.js"><link rel="prefetch" href="/assets/js/146.4158b83c.js"><link rel="prefetch" href="/assets/js/147.2b7ff1bf.js"><link rel="prefetch" href="/assets/js/148.db87ffd1.js"><link rel="prefetch" href="/assets/js/149.c1ee2ee3.js"><link rel="prefetch" href="/assets/js/15.7eab4f07.js"><link rel="prefetch" href="/assets/js/150.f27c8a2f.js"><link rel="prefetch" href="/assets/js/151.dca0e77e.js"><link rel="prefetch" href="/assets/js/152.7eae9647.js"><link rel="prefetch" href="/assets/js/153.9acd6663.js"><link rel="prefetch" href="/assets/js/154.c81ce4a1.js"><link rel="prefetch" href="/assets/js/155.78c0e376.js"><link rel="prefetch" href="/assets/js/156.d36de1c8.js"><link rel="prefetch" href="/assets/js/157.08ec5781.js"><link rel="prefetch" href="/assets/js/158.67e7574c.js"><link rel="prefetch" href="/assets/js/159.84bcf47a.js"><link rel="prefetch" href="/assets/js/16.a5780b1b.js"><link rel="prefetch" href="/assets/js/160.f38ea315.js"><link rel="prefetch" href="/assets/js/161.bc2fca13.js"><link rel="prefetch" href="/assets/js/162.8f935ab2.js"><link rel="prefetch" href="/assets/js/163.6ee48eed.js"><link rel="prefetch" href="/assets/js/164.2a30ded0.js"><link rel="prefetch" href="/assets/js/165.1d246a3d.js"><link rel="prefetch" href="/assets/js/166.53f83f0c.js"><link rel="prefetch" href="/assets/js/167.95ef46f2.js"><link rel="prefetch" href="/assets/js/168.b5bbd1aa.js"><link rel="prefetch" href="/assets/js/169.22ea9357.js"><link rel="prefetch" href="/assets/js/17.ab87113f.js"><link rel="prefetch" href="/assets/js/170.d22bab3d.js"><link rel="prefetch" href="/assets/js/171.a1380fe9.js"><link rel="prefetch" href="/assets/js/172.cc63875b.js"><link rel="prefetch" href="/assets/js/173.4077b90d.js"><link rel="prefetch" href="/assets/js/174.81d25acd.js"><link rel="prefetch" href="/assets/js/175.4d411eba.js"><link rel="prefetch" href="/assets/js/176.9136b314.js"><link rel="prefetch" href="/assets/js/177.b7662354.js"><link rel="prefetch" href="/assets/js/178.21748490.js"><link rel="prefetch" href="/assets/js/179.a2df09db.js"><link rel="prefetch" href="/assets/js/18.e9fb541c.js"><link rel="prefetch" href="/assets/js/180.ef7deece.js"><link rel="prefetch" href="/assets/js/181.a7270c72.js"><link rel="prefetch" href="/assets/js/182.9cc6cf61.js"><link rel="prefetch" href="/assets/js/183.cde63726.js"><link rel="prefetch" href="/assets/js/184.d6fe28aa.js"><link rel="prefetch" href="/assets/js/185.c3e0316a.js"><link rel="prefetch" href="/assets/js/186.9d5cd6b2.js"><link rel="prefetch" href="/assets/js/187.da6f3361.js"><link rel="prefetch" href="/assets/js/188.00102a30.js"><link rel="prefetch" href="/assets/js/189.3067df5e.js"><link rel="prefetch" href="/assets/js/19.4c6983bd.js"><link rel="prefetch" href="/assets/js/190.47d8ea64.js"><link rel="prefetch" href="/assets/js/191.80a4b689.js"><link rel="prefetch" href="/assets/js/192.09c7bc9b.js"><link rel="prefetch" href="/assets/js/193.ac58fbd5.js"><link rel="prefetch" href="/assets/js/194.70b81c9e.js"><link rel="prefetch" href="/assets/js/195.4180d986.js"><link rel="prefetch" href="/assets/js/196.18ab682a.js"><link rel="prefetch" href="/assets/js/197.f7d23379.js"><link rel="prefetch" href="/assets/js/198.004e1141.js"><link rel="prefetch" href="/assets/js/199.012e6fa7.js"><link rel="prefetch" href="/assets/js/20.d03d2629.js"><link rel="prefetch" href="/assets/js/200.0b6c1a9b.js"><link rel="prefetch" href="/assets/js/201.b1bf2ad8.js"><link rel="prefetch" href="/assets/js/202.f6fd468d.js"><link rel="prefetch" href="/assets/js/203.7356891e.js"><link rel="prefetch" href="/assets/js/204.e2a6cd89.js"><link rel="prefetch" href="/assets/js/205.52872fad.js"><link rel="prefetch" href="/assets/js/206.7018afe5.js"><link rel="prefetch" href="/assets/js/207.506f8808.js"><link rel="prefetch" href="/assets/js/208.f9c791b9.js"><link rel="prefetch" href="/assets/js/209.c21c0ed5.js"><link rel="prefetch" href="/assets/js/210.213865ba.js"><link rel="prefetch" href="/assets/js/211.f49b9ac0.js"><link rel="prefetch" href="/assets/js/212.501c2562.js"><link rel="prefetch" href="/assets/js/213.ad82c2ab.js"><link rel="prefetch" href="/assets/js/214.777344d1.js"><link rel="prefetch" href="/assets/js/215.f61eee38.js"><link rel="prefetch" href="/assets/js/216.a503e2e6.js"><link rel="prefetch" href="/assets/js/217.f4cba57a.js"><link rel="prefetch" href="/assets/js/218.d544bc30.js"><link rel="prefetch" href="/assets/js/219.8c78db25.js"><link rel="prefetch" href="/assets/js/22.ed5fff45.js"><link rel="prefetch" href="/assets/js/220.f43c7028.js"><link rel="prefetch" href="/assets/js/221.f010d9aa.js"><link rel="prefetch" href="/assets/js/222.f25b653b.js"><link rel="prefetch" href="/assets/js/223.6e4cdc66.js"><link rel="prefetch" href="/assets/js/224.120e1d5c.js"><link rel="prefetch" href="/assets/js/225.c739c99f.js"><link rel="prefetch" href="/assets/js/226.1ab213be.js"><link rel="prefetch" href="/assets/js/227.f52b6da0.js"><link rel="prefetch" href="/assets/js/228.61a619f2.js"><link rel="prefetch" href="/assets/js/229.2b234713.js"><link rel="prefetch" href="/assets/js/23.c3e4c2a8.js"><link rel="prefetch" href="/assets/js/230.c0740199.js"><link rel="prefetch" href="/assets/js/231.d60b2250.js"><link rel="prefetch" href="/assets/js/232.5fae4e74.js"><link rel="prefetch" href="/assets/js/233.573c0ba5.js"><link rel="prefetch" href="/assets/js/234.4da497f3.js"><link rel="prefetch" href="/assets/js/235.d6932e52.js"><link rel="prefetch" href="/assets/js/236.ddc52bb8.js"><link rel="prefetch" href="/assets/js/237.93b59c4d.js"><link rel="prefetch" href="/assets/js/238.5037c914.js"><link rel="prefetch" href="/assets/js/239.b09e28cd.js"><link rel="prefetch" href="/assets/js/24.aaf82f90.js"><link rel="prefetch" href="/assets/js/240.5d3d60a1.js"><link rel="prefetch" href="/assets/js/241.bf0a6a97.js"><link rel="prefetch" href="/assets/js/242.1145645a.js"><link rel="prefetch" href="/assets/js/243.5f52de4a.js"><link rel="prefetch" href="/assets/js/244.639f99a7.js"><link rel="prefetch" href="/assets/js/245.fd5bec66.js"><link rel="prefetch" href="/assets/js/246.0f26fa85.js"><link rel="prefetch" href="/assets/js/247.63baa1ba.js"><link rel="prefetch" href="/assets/js/248.78df0f68.js"><link rel="prefetch" href="/assets/js/249.27dd0f39.js"><link rel="prefetch" href="/assets/js/25.bd5c9b1b.js"><link rel="prefetch" href="/assets/js/26.c5dca291.js"><link rel="prefetch" href="/assets/js/27.098947b2.js"><link rel="prefetch" href="/assets/js/28.acf06d74.js"><link rel="prefetch" href="/assets/js/29.4f02e845.js"><link rel="prefetch" href="/assets/js/30.4c6c9320.js"><link rel="prefetch" href="/assets/js/31.9026d0a0.js"><link rel="prefetch" href="/assets/js/32.0481d5e3.js"><link rel="prefetch" href="/assets/js/33.da791f59.js"><link rel="prefetch" href="/assets/js/34.ba6cd013.js"><link rel="prefetch" href="/assets/js/35.8f95e768.js"><link rel="prefetch" href="/assets/js/36.0b969ba7.js"><link rel="prefetch" href="/assets/js/37.7ea55350.js"><link rel="prefetch" href="/assets/js/38.78c7a0b0.js"><link rel="prefetch" href="/assets/js/39.5b067c88.js"><link rel="prefetch" href="/assets/js/4.51c81ff7.js"><link rel="prefetch" href="/assets/js/40.7ab652d2.js"><link rel="prefetch" href="/assets/js/41.a64d6f08.js"><link rel="prefetch" href="/assets/js/42.2a28cf85.js"><link rel="prefetch" href="/assets/js/43.7457ed35.js"><link rel="prefetch" href="/assets/js/44.e2e30c8b.js"><link rel="prefetch" href="/assets/js/45.2bc4d806.js"><link rel="prefetch" href="/assets/js/46.e7959e78.js"><link rel="prefetch" href="/assets/js/47.755adb80.js"><link rel="prefetch" href="/assets/js/48.56217157.js"><link rel="prefetch" href="/assets/js/49.829e8efd.js"><link rel="prefetch" href="/assets/js/5.7e28d145.js"><link rel="prefetch" href="/assets/js/50.3abe045a.js"><link rel="prefetch" href="/assets/js/51.fc23cac9.js"><link rel="prefetch" href="/assets/js/52.ee387591.js"><link rel="prefetch" href="/assets/js/53.66fb5476.js"><link rel="prefetch" href="/assets/js/54.2ae5d025.js"><link rel="prefetch" href="/assets/js/55.67e71584.js"><link rel="prefetch" href="/assets/js/56.831eb952.js"><link rel="prefetch" href="/assets/js/57.da7af2ae.js"><link rel="prefetch" href="/assets/js/58.d0caae05.js"><link rel="prefetch" href="/assets/js/59.33ae66a9.js"><link rel="prefetch" href="/assets/js/6.05446eee.js"><link rel="prefetch" href="/assets/js/60.8d36a5f4.js"><link rel="prefetch" href="/assets/js/61.0e737472.js"><link rel="prefetch" href="/assets/js/62.123a111d.js"><link rel="prefetch" href="/assets/js/63.033c3ce3.js"><link rel="prefetch" href="/assets/js/64.331added.js"><link rel="prefetch" href="/assets/js/65.68b2a888.js"><link rel="prefetch" href="/assets/js/66.0d9b408c.js"><link rel="prefetch" href="/assets/js/67.6578e28f.js"><link rel="prefetch" href="/assets/js/68.437c0ad9.js"><link rel="prefetch" href="/assets/js/69.f7303ba1.js"><link rel="prefetch" href="/assets/js/7.c0c4ecb3.js"><link rel="prefetch" href="/assets/js/70.b4e38c42.js"><link rel="prefetch" href="/assets/js/71.6fe5659c.js"><link rel="prefetch" href="/assets/js/72.15864c18.js"><link rel="prefetch" href="/assets/js/73.3a683695.js"><link rel="prefetch" href="/assets/js/74.741243aa.js"><link rel="prefetch" href="/assets/js/75.e5d6ab9f.js"><link rel="prefetch" href="/assets/js/76.e7f495dd.js"><link rel="prefetch" href="/assets/js/77.b6af2a6d.js"><link rel="prefetch" href="/assets/js/78.a77d8177.js"><link rel="prefetch" href="/assets/js/79.d66dba3a.js"><link rel="prefetch" href="/assets/js/8.d73b2519.js"><link rel="prefetch" href="/assets/js/80.4f099f22.js"><link rel="prefetch" href="/assets/js/81.5e26c33e.js"><link rel="prefetch" href="/assets/js/82.2d5eb7ab.js"><link rel="prefetch" href="/assets/js/83.c35ae432.js"><link rel="prefetch" href="/assets/js/84.671c2cac.js"><link rel="prefetch" href="/assets/js/85.6710d7e7.js"><link rel="prefetch" href="/assets/js/86.b91184b2.js"><link rel="prefetch" href="/assets/js/87.fa70bd19.js"><link rel="prefetch" href="/assets/js/88.4a6726ee.js"><link rel="prefetch" href="/assets/js/89.5f764509.js"><link rel="prefetch" href="/assets/js/9.41696cd4.js"><link rel="prefetch" href="/assets/js/90.1c6a4c4a.js"><link rel="prefetch" href="/assets/js/91.1a8fec76.js"><link rel="prefetch" href="/assets/js/92.91f01565.js"><link rel="prefetch" href="/assets/js/93.ca77d118.js"><link rel="prefetch" href="/assets/js/94.db4fe3ce.js"><link rel="prefetch" href="/assets/js/95.7b83786d.js"><link rel="prefetch" href="/assets/js/96.f420386e.js"><link rel="prefetch" href="/assets/js/97.031b438f.js"><link rel="prefetch" href="/assets/js/98.5e88c7e7.js"><link rel="prefetch" href="/assets/js/99.61d81231.js">
    <link rel="stylesheet" href="/assets/css/0.styles.aadc6af7.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-130b300a><div data-v-130b300a><div class="password-shadow password-wrapper-out" style="display:none;" data-v-25ba6db2 data-v-130b300a data-v-130b300a><h3 class="title" data-v-25ba6db2 data-v-25ba6db2>LinHuijuan's Blog</h3> <p class="description" data-v-25ba6db2 data-v-25ba6db2>Stay Hungry</p> <label id="box" class="inputBox" data-v-25ba6db2 data-v-25ba6db2><input type="password" value="" data-v-25ba6db2> <span data-v-25ba6db2>Konck! Knock!</span> <button data-v-25ba6db2>OK</button></label> <div class="footer" data-v-25ba6db2 data-v-25ba6db2><span data-v-25ba6db2><i class="iconfont reco-theme" data-v-25ba6db2></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-25ba6db2>vuePress-theme-reco</a></span> <span data-v-25ba6db2><i class="iconfont reco-copyright" data-v-25ba6db2></i> <a data-v-25ba6db2><!---->
            
          <!---->
          2022
        </a></span></div></div> <div class="hide" data-v-130b300a><header class="navbar" data-v-130b300a><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">LinHuijuan's Blog</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="undefined"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      前端
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/js/" class="nav-link"><i class="undefined"></i>
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/css/" class="nav-link"><i class="undefined"></i>
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/html/" class="nav-link"><i class="undefined"></i>
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/algorithm/" class="nav-link"><i class="undefined"></i>
  算法
</a></li><li class="dropdown-item"><!----> <a href="/browser/" class="nav-link"><i class="undefined"></i>
  浏览器
</a></li><li class="dropdown-item"><!----> <a href="/vue/" class="nav-link"><i class="undefined"></i>
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/flutter/" class="nav-link"><i class="undefined"></i>
  Flutter
</a></li><li class="dropdown-item"><!----> <a href="/nodejs/" class="nav-link"><i class="undefined"></i>
  Node.js
</a></li><li class="dropdown-item"><!----> <a href="/webpack/" class="nav-link"><i class="undefined"></i>
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/typescript/" class="nav-link"><i class="undefined"></i>
  TypeScript
</a></li><li class="dropdown-item"><!----> <a href="/network/" class="nav-link"><i class="undefined"></i>
  网络
</a></li><li class="dropdown-item"><!----> <a href="/others/" class="nav-link router-link-active"><i class="undefined"></i>
  其他
</a></li><li class="dropdown-item"><!----> <a href="/demo/" class="nav-link"><i class="undefined"></i>
  Demo
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/LinHuijuan" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-130b300a></div> <aside class="sidebar" data-v-130b300a><div class="personal-info-wrapper" data-v-39576ba9 data-v-130b300a><!----> <!----> <div class="num" data-v-39576ba9><div data-v-39576ba9><h3 data-v-39576ba9>223</h3> <h6 data-v-39576ba9>Articles</h6></div> <div data-v-39576ba9><h3 data-v-39576ba9>0</h3> <h6 data-v-39576ba9>Tags</h6></div></div> <ul class="social-links" data-v-39576ba9></ul> <hr data-v-39576ba9></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="undefined"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      前端
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/js/" class="nav-link"><i class="undefined"></i>
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/css/" class="nav-link"><i class="undefined"></i>
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/html/" class="nav-link"><i class="undefined"></i>
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/algorithm/" class="nav-link"><i class="undefined"></i>
  算法
</a></li><li class="dropdown-item"><!----> <a href="/browser/" class="nav-link"><i class="undefined"></i>
  浏览器
</a></li><li class="dropdown-item"><!----> <a href="/vue/" class="nav-link"><i class="undefined"></i>
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/flutter/" class="nav-link"><i class="undefined"></i>
  Flutter
</a></li><li class="dropdown-item"><!----> <a href="/nodejs/" class="nav-link"><i class="undefined"></i>
  Node.js
</a></li><li class="dropdown-item"><!----> <a href="/webpack/" class="nav-link"><i class="undefined"></i>
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/typescript/" class="nav-link"><i class="undefined"></i>
  TypeScript
</a></li><li class="dropdown-item"><!----> <a href="/network/" class="nav-link"><i class="undefined"></i>
  网络
</a></li><li class="dropdown-item"><!----> <a href="/others/" class="nav-link router-link-active"><i class="undefined"></i>
  其他
</a></li><li class="dropdown-item"><!----> <a href="/demo/" class="nav-link"><i class="undefined"></i>
  Demo
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/LinHuijuan" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav> <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>CSS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>HTML</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>算法</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>浏览器</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Flutter</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Node.js</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Webpack</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>TypeScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>网络</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>其他</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/others/" aria-current="page" class="sidebar-link">Others Part</a></li><li><a href="/others/echarts.html" class="sidebar-link">echarts 使用</a></li><li><a href="/others/elementui.html" class="sidebar-link">Elementui 使用</a></li><li><a href="/others/error monitor.html" class="sidebar-link">错误监控</a></li><li><a href="/others/except monitor.html" class="sidebar-link">异常监控</a></li><li><a href="/others/git.html" class="sidebar-link">Git</a></li><li><a href="/others/json.html" class="sidebar-link">JSON</a></li><li><a href="/others/naming rule.html" class="sidebar-link">命名规则</a></li><li><a href="/others/plugin.html" class="sidebar-link">插件开发总结</a></li><li><a href="/others/performance optimization.html" class="active sidebar-link">页面性能优化</a></li><li><a href="/others/photoshop.html" class="sidebar-link">ps前端必备知识</a></li><li><a href="/others/question answer.html" class="sidebar-link">答疑大杂烩</a></li><li><a href="/others/scaffold tool.html" class="sidebar-link">打造自己的项目构建-脚手架</a></li><li><a href="/others/vscode use.html" class="sidebar-link">Vscode使用</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Demo</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-25ba6db2 data-v-130b300a><h3 class="title" data-v-25ba6db2 data-v-25ba6db2></h3> <!----> <label id="box" class="inputBox" data-v-25ba6db2 data-v-25ba6db2><input type="password" value="" data-v-25ba6db2> <span data-v-25ba6db2>Konck! Knock!</span> <button data-v-25ba6db2>OK</button></label> <div class="footer" data-v-25ba6db2 data-v-25ba6db2><span data-v-25ba6db2><i class="iconfont reco-theme" data-v-25ba6db2></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-25ba6db2>vuePress-theme-reco</a></span> <span data-v-25ba6db2><i class="iconfont reco-copyright" data-v-25ba6db2></i> <a data-v-25ba6db2><!---->
            
          <!---->
          2022
        </a></span></div></div> <div data-v-130b300a><main class="page" style="padding-right:0;"><section><div class="page-title"><h1 class="title">页面性能优化</h1> <div data-v-f875f3fc><!----> <!----> <!----> <!----></div></div> <div class="theme-reco-content content__default"><h1 id="页面性能优化"><a href="#页面性能优化" class="header-anchor">#</a> 页面性能优化</h1> <p>可参考：<a href="https://link.juejin.im/?target=http%3A%2F%2Fwww.cnblogs.com%2Fxianyulaodi%2Fp%2F5755079.html" target="_blank" rel="noopener noreferrer">雅虎前端优化的35条军规<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <blockquote><p>降低请求量：合并资源，减少HTTP 请求数，minify / gzip 压缩，webP，lazyLoad。</p></blockquote> <blockquote><p>加快请求速度：预解析DNS，减少域名数，并行加载，CDN 分发。</p></blockquote> <blockquote><p>缓存：HTTP 协议缓存请求，离线缓存 manifest，离线数据缓存localStorage。</p></blockquote> <blockquote><p>渲染：JS/CSS优化，加载顺序，服务端渲染，pipeline。</p></blockquote> <blockquote><ol><li>网络层面
<ul><li>请求过程的优化-HTTP请求优化(构建工具性能调优,Gzipd压缩原理,图片优化)</li> <li>减少网络请求-本地存储(浏览器的缓存机制,离线存储技术)</li></ul></li> <li>渲染层面
<ul><li>服务端渲染的探索与实践</li> <li>浏览器的渲染机制解析(CSS性能方案,JS性能方案)</li> <li>DOM优化(事件循环与异步更新,回流与重绘)</li> <li>首屏渲染提速(懒加载)</li></ul></li> <li>性能监测
<ul><li>可视化工具(Performance,LightHouse)</li> <li>W3C性能API</li></ul></li></ol></blockquote> <p>[TOC]</p> <p>提升页面性能优化的方法有哪些：</p> <ul><li>1、资源压缩合并，减少http请求</li> <li>2、<strong>非核心代码异步加载</strong> --&gt; 异步加载的方式 --&gt; 异步加载的区别</li></ul> <p>如果回答出<code>非核心代码异步加载</code>，就会层层深入。</p> <ul><li>3、利用浏览器缓存 --&gt; 缓存的分类 --&gt; 缓存的原理</li></ul> <p><strong>缓存</strong>是所有性能优化的方式中最重要的一步。</p> <ul><li>4、使用CDN</li></ul> <p>浏览器第一次打开页面时，缓存是起不了作用的。</p> <ul><li>5、DNS预解析</li></ul> <h2 id="一、资源压缩合并"><a href="#一、资源压缩合并" class="header-anchor">#</a> 一、资源压缩合并</h2> <blockquote><p>HTTP请求优化方向：</p> <ol><li>减少请求次数。</li> <li>减少单次请求所花费的时间。</li></ol> <p>即，资源的压缩和合并。</p></blockquote> <p>参考链接：<a href="https://juejin.im/post/5b022bdf518825426d2d69fe" target="_blank" rel="noopener noreferrer">https://juejin.im/post/5b022bdf518825426d2d69fe<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>可以加快首次访问速度，减少http请求。</p> <p>保护代码，降低代码的可读性。</p> <h3 id="_1-1-html压缩"><a href="#_1-1-html压缩" class="header-anchor">#</a> 1.1 html压缩</h3> <ul><li><p>压缩这些在文本文件中有意义，但是<strong>在HTML中不显示的字符</strong></p> <ul><li><strong>空格，制表符，换行符</strong>，<strong>注释</strong></li></ul></li> <li><p>压缩方式：</p> <ul><li><p>nodejs提供了html-minifier工具</p></li> <li><p>后端模板引擎渲染压缩</p></li></ul></li></ul> <h3 id="_1-2-css压缩"><a href="#_1-2-css压缩" class="header-anchor">#</a> 1.2 CSS压缩</h3> <ol><li>无效代码删除</li> <li>css语义合并。</li></ol> <ul><li>压缩方式
<ul><li>使用html-minifier工具</li> <li>使用clean-css对css压缩</li></ul></li></ul> <h3 id="_1-3-js压缩和混乱"><a href="#_1-3-js压缩和混乱" class="header-anchor">#</a> 1.3 JS压缩和混乱</h3> <p>js的压缩和混乱主要包括以下这几部分：</p> <ol><li>无效字符的删除</li> <li>剔除注释</li> <li>代码语义的缩减和优化</li> <li>代码保护(代码逻辑变得混乱，降低代码的可读性，这点很重要)</li></ol> <ul><li>压缩方式
<ul><li>使用html-minifier工具</li> <li>使用uglifyjs2对js进行压缩</li></ul></li></ul> <h3 id="_1-4-合并文件"><a href="#_1-4-合并文件" class="header-anchor">#</a> 1.4 合并文件</h3> <ul><li>合并图片（css sprites）、CSS和JS文件合并、CSS和JS文件压缩。</li> <li><strong>压缩合并css和js可以减少网站http请求的次数，但合并文件可能会带来问题:首屏渲染和缓存失效问题</strong>。那该如何处理这问题呢？----公共库合并和不同页面的合并。</li> <li>合并方式
<ul><li>使用nodejs实现文件合并(gulp、fis3)</li></ul></li></ul> <h3 id="_1-5-webpack-性能调优与-gzip-原理"><a href="#_1-5-webpack-性能调优与-gzip-原理" class="header-anchor">#</a> 1.5 webpack 性能调优与 Gzip 原理</h3> <h4 id="_1-5-1-构建过程提速"><a href="#_1-5-1-构建过程提速" class="header-anchor">#</a> 1.5.1 构建过程提速</h4> <h5 id="_1-5-1-1-不要让loader做太多事情"><a href="#_1-5-1-1-不要让loader做太多事情" class="header-anchor">#</a> 1.5.1.1 不要让loader做太多事情</h5> <ul><li>include, exclude, 为loader添加相应的参数</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
      <span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(node_modules|bower_components)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
      <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'babel-loader?cacheDirectory=true'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">presets</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'@babel/preset-env'</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h5 id="_1-5-1-2-不要放过第三方库"><a href="#_1-5-1-2-不要放过第三方库" class="header-anchor">#</a> 1.5.1.2 不要放过第三方库</h5> <ul><li>使用 DllPlugin 代替 CommonsChunkPlugin，这个依赖库不会跟着业务代码一起被在重新打包，只有当依赖自身发生版本变化时才会重新打包。</li></ul> <h5 id="_1-5-1-3-happypack"><a href="#_1-5-1-3-happypack" class="header-anchor">#</a> 1.5.1.3 Happypack</h5> <ul><li>Happypack会充分利用CPU多核并发的优势，将任务分解给多个子进程进行并发执行，提高打包效率。</li> <li>相反，webpack是单线程的。</li></ul> <h4 id="_1-5-2-构建结果体积压缩"><a href="#_1-5-2-构建结果体积压缩" class="header-anchor">#</a> 1.5.2 构建结果体积压缩</h4> <blockquote><p>webpack4 现在已经默认使用 uglifyjs-webpack-plugin 对代码做压缩了——在 webpack4 中，我们是通过配置 optimization.minimize 与 optimization.minimizer 来自定义压缩相关的操作的。</p></blockquote> <ul><li>tree-shaking 适用于处理模块级别的冗余代码。
<ul><li>基于 import/export 语法，Tree-Shaking 可以在编译的过程中获悉哪些模块并没有真正被使用，这些没用的代码，在最后打包的时候会被去除。</li></ul></li></ul> <h5 id="_1-5-2-1-按需加载"><a href="#_1-5-2-1-按需加载" class="header-anchor">#</a> 1.5.2.1 按需加载</h5> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'/../dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'app.js'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">publicPath</span><span class="token operator">:</span> defaultSettings<span class="token punctuation">.</span>publicPath<span class="token punctuation">,</span>
    <span class="token comment">// 指定 chunkFilename</span>
    <span class="token literal-property property">chunkFilename</span><span class="token operator">:</span> <span class="token string">'[name].[chunkhash:5].chunk.js'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-react line-numbers-mode"><pre class="language-text"><code>const getComponent =&gt; (location, cb) {
  require.ensure([], (require) =&gt; {
    cb(null, require('../pages/BugComponent').default)
  }, 'bug')
},

&lt;Route path=&quot;/bug&quot; getComponent={getComponent}&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="_1-5-3-gzip-http压缩"><a href="#_1-5-3-gzip-http压缩" class="header-anchor">#</a> 1.5.3 Gzip - HTTP压缩</h4> <blockquote><p>HTTP压缩就是以缩小体积为目的，对HTTP内容进行重新编码的过程。</p></blockquote> <ul><li>只要不是1k、2k的小文件，压缩和解压的时间开销，相比传输过程节省下来的时间开销，是微不足道的。</li> <li>Gzip压缩后通常能减少响应70%左右的大小。</li> <li>压缩原理：在文本文件中找出重复出现的字符串，并临时替换它们，从而使整个文件变小。</li> <li>Gzip压缩是服务器的活，如果服务器了解到有Gzip的需求，则会启动CPU去完成任务，故若存在大量压缩需求，服务器也是扛不住的。因此，Webpack中的Gzip压缩就是为了在构建过程中做一部分服务器的工作，为服务器分压。</li></ul> <h2 id="二、非核心代码异步加载"><a href="#二、非核心代码异步加载" class="header-anchor">#</a> 二、非核心代码异步加载</h2> <p>加快首屏响应速度。</p> <h3 id="_2-1-异步加载的方式"><a href="#_2-1-异步加载的方式" class="header-anchor">#</a> 2.1 异步加载的方式</h3> <h4 id="_2-1-1-动态脚本加载"><a href="#_2-1-1-动态脚本加载" class="header-anchor">#</a> 2.1.1 动态脚本加载</h4> <p>在还没定义defer和async前，异步加载的方式是动态创建script。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">addScriptTag</span><span class="token punctuation">(</span><span class="token parameter">src</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  
    <span class="token keyword">var</span> script <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'script'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
    script<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;type&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;text/javascript&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
    script<span class="token punctuation">.</span>src <span class="token operator">=</span> src<span class="token punctuation">;</span>  
    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>script<span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token punctuation">}</span>  
window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  
    <span class="token function">addScriptTag</span><span class="token punctuation">(</span><span class="token string">&quot;js/index.js&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="_2-1-2-defer"><a href="#_2-1-2-defer" class="header-anchor">#</a> 2.1.2 defer</h4> <ol><li>立即下载，延迟执行（HTML解析完之后才会执行）。</li> <li>按照加载的顺序依次执行js文件。</li> <li>兼容所有浏览器。</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;./defer.js&quot;</span> defer<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="_2-1-3-async"><a href="#_2-1-3-async" class="header-anchor">#</a> 2.1.3 async</h4> <ol><li><p>立即下载，立即执行。</p></li> <li><p>执行顺序和加载顺序无关。(谁先加载完就执行谁)</p></li> <li><p>HTmL5新增特性，在IE&lt;=9时不支持。</p></li> <li><p>仅适用于外部脚本。</p></li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;./async.js&quot;</span> async<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_2-2-异步加载的区别"><a href="#_2-2-异步加载的区别" class="header-anchor">#</a> 2.2 异步加载的区别</h3> <p><img src="/assets/img/async-load.c33528de.jpg" alt="异步加载"></p> <p>其中蓝色线代表网络读取，红色线代表执行时间，这俩都是针对脚本的；绿色线代表 HTML 解析。</p> <ul><li>最稳妥的办法还是把<code>&lt;script&gt;</code>写在<code>&lt;body&gt;</code>底部，没有兼容性问题，没有白屏问题，没有执行顺序问题。</li> <li>当JS与DOM元素和其他脚本依赖关系不强时，可以选用async；当JS依赖于DOM元素和其他脚本的执行结果时，可以选用defer。</li></ul> <h2 id="三、浏览器缓存"><a href="#三、浏览器缓存" class="header-anchor">#</a> 三、浏览器缓存</h2> <p>提升再次次访问速度，减少服务器压力。</p> <p><strong>缓存</strong>：资源文件（比如图片）在<strong>本地的硬盘</strong>里存有副本，浏览器下次请求的时候，可能直接从本地磁盘里读取，而不会重新请求图片的url。</p> <blockquote><h4 id="缓存的机制"><a href="#缓存的机制" class="header-anchor">#</a> 缓存的机制</h4> <p><strong>强制缓存优先于协商缓存进行，若强制缓存(Expires和Cache-Control)生效则直接使用缓存，若不生效则进行协商缓存(Last-Modified / If-Modified-Since和Etag / If-None-Match)，协商缓存由服务器决定是否使用缓存，若协商缓存失效，则重新获取请求结果，再存入浏览器缓存中；生效则返回304，继续使用缓存</strong>。</p></blockquote> <p><img src="/assets/img/cache.04404d9f.jpg" alt="缓存机制"></p> <h3 id="_3-1-强缓存"><a href="#_3-1-强缓存" class="header-anchor">#</a> 3.1 强缓存</h3> <p><strong>强缓存</strong>：不用请求服务器，直接使用本地的缓存。</p> <p>在chrome控制台的network选项中可以看到该请求返回200的状态码，并且size显示from disk cache或from memory cache。</p> <p>**强缓存是利用 http 响应头中的<code>Expires</code>或<code>Cache-Control</code>实现的。**若命中强缓存，则浏览器直接从缓存中获取资源，不会与服务器发生通信。</p> <p>浏览器第一次请求一个资源时，服务器在返回该资源的同时，会把上面这两个属性放在response header中。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>Response Headers
	Expires Expires:Thu, 21 Jan 2017 23:2=39:02 GMT
	Cache-Control:max-age=3600
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>注意</strong>：这两个response header属性可以只启用一个，也可以同时启用。当response header中，Expires和Cache-Control同时存在时，<strong>Cache-Control的优先级高于Expires</strong>。</p> <h4 id="_3-1-1-expires"><a href="#_3-1-1-expires" class="header-anchor">#</a> 3.1.1 Expires</h4> <p>服务器返回的<strong>绝对时间</strong>。</p> <p>http1.0的产物。浏览器再次请求这个资源时，先从缓存中寻找，找到这个资源后，拿出它的Expires跟当前的请求时间比较，如果请求时间在Expires的时间之前，就能命中缓存，否则就不行。</p> <p>如果缓存没有命中，浏览器直接从服务器请求资源时，Expires Header在重新请求的时候会被更新。</p> <p><strong>缺点：</strong></p> <p>由于<code>Expires</code>是服务器返回的一个绝对时间，存在的问题是：服务器的时间和客户端的时间可能不一致。在服务器时间与客户端时间相差较大时，缓存管理容易出现问题。</p> <p>所以，在http1.1中，提出了一个新的response header，就是Cache-Control。</p> <h4 id="_3-1-2-cache-control"><a href="#_3-1-2-cache-control" class="header-anchor">#</a> 3.1.2 Cache-Control</h4> <p>服务器返回的<strong>相对时间</strong>。（单位秒）</p> <p>http1.1中新增的 response header。浏览器第一次请求资源之后，在接下来的相对时间之内，都可以利用本地缓存。超出相对事件则重新请求时，<code>Cache-Control</code>会被更新。</p> <h4 id="_3-1-3-应用"><a href="#_3-1-3-应用" class="header-anchor">#</a> 3.1.3 应用</h4> <p>对于有大量静态资源的网页，一定要利用强缓存，提高响应速度。通常的做法是，为这些静态资源全部配置一个超时时间超长的Expires或Cache-Control，比如京东首页缓存的资源，它的缓存过期时间都设置到了2026年。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>cache-control: max-age=3600, s-maxage=31536000
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>s-maxage的优先级比max-age高，如果s-maxage未过期，则向代理服务器请求其缓存内容。</li> <li>s-maxmessage仅在代理服务器中生效，客户端只考虑max-age。</li></ul> <h4 id="_3-1-4-其他"><a href="#_3-1-4-其他" class="header-anchor">#</a> 3.1.4 其他</h4> <h5 id="_3-1-4-1-public-与-private"><a href="#_3-1-4-1-public-与-private" class="header-anchor">#</a> 3.1.4.1 public 与 private</h5> <ul><li>public
<ul><li>可被浏览器和代理服务器缓存</li></ul></li> <li>private
<ul><li>默认值</li> <li>仅被浏览器缓存</li></ul></li></ul> <h3 id="_3-2-协商缓存"><a href="#_3-2-协商缓存" class="header-anchor">#</a> 3.2 协商缓存</h3> <p><strong>协商缓存</strong>：</p> <ol><li>当浏览器请求某资源时，发现超出了强缓存设置的时间，就会发出请求到服务器，询问是否从缓存中读取资源。</li> <li>服务器会根据这个请求的request header的一些参数来判断是否命中协商缓存，如果命中，则返回<strong>304</strong>状态码并带上新的response header通知浏览器从缓存中读取资源。</li></ol> <ul><li>协商缓存需要与cache-control共同使用。</li></ul> <h4 id="_3-2-1-last-modified、if-modified-since"><a href="#_3-2-1-last-modified、if-modified-since" class="header-anchor">#</a> 3.2.1 Last-Modified、If-Modified-Since</h4> <p>过程如下：</p> <p>（1）浏览器首次请求资源时，服务器在返回这个资源的同时，会加上<code>Last-Modified</code>这个 response header，表示这该资源在服务器上的最后修改时间。</p> <p>（2）浏览器再次请求这个资源时，会加上<code>If-Modified-Since</code>这个 request header，即上一次返回的<code>Last-Modified</code>的值。</p> <p>（3）服务器收到第二次请求时，会比对浏览器传过来的<code>If-Modified-Since</code>和资源在服务器上的最后修改时间<code>Last-Modified</code>，判断资源是否有变化。如果没有变化则返回304 Not Modified，但不返回资源内容（此时，服务器<strong>不会返回 Last-Modified</strong> ）；如果有变化，就正常返回资源内容（继续重复整个流程）。</p> <p>（4）浏览器如果收到304的响应，就会从缓存中加载资源。</p> <p>优点：</p> <p>这样保证不向客户端重复发出资源，也保证当服务器有变化时，客户端能够得到最新的资源。一个304响应比一个静态资源通常小得多，这样就节省了网络带宽。</p> <p><strong>缺点：</strong></p> <p><code>Last-Modified</code>、<code>If-Modified-Since</code>一般来说都是非常可靠的，但面临的问题是：</p> <ul><li><strong>服务器上的资源变化了，但是最后的修改时间却没有变化</strong>。
<ul><li>如果服务器端在一秒内修改文件两次，但产生的<code>Last-Modified</code>却只有一个值。</li></ul></li> <li><strong>文件修改时间改了，但文件内容却没有变</strong></li></ul> <p>这一对header就无法解决这种情况。</p> <h4 id="_3-2-2-etag、if-none-match"><a href="#_3-2-2-etag、if-none-match" class="header-anchor">#</a> 3.2.2 ETag、If-None-Match</h4> <p>根据文件内容是否修改来决定缓存策略。</p> <p>ETag（Entity Tag）：被请求变量的实体值。</p> <p>过程如下：</p> <p>（1）浏览器第一次请求一个资源，服务器在返回这个资源的同时，会加上<code>ETag</code>这个 response header，是服务器根据当前请求的资源生成的<strong>唯一标识</strong>。这个唯一标识是一个字符串，只要资源有变化这个串就不同，跟最后修改时间无关。</p> <p>（2）浏览器再次请求这个资源时，会加上<code>If-None-Match</code>这个 request header，即上一次返回的<code>ETag</code>的值。</p> <p>3）服务器第二次请求时，会对比浏览器传过来的<code>If-None-Match</code>和服务器重新生成的一个新的<code>ETag</code>，判断资源是否有变化。如果没有变化则返回304 Not Modified，但不返回资源内容（此时，由于<strong>ETag重新生成过</strong>，response header中还会把这个ETag返回，即使这个ETag并无变化）。如果有变化，就正常返回资源内容（继续重复整个流程）。</p> <p>（4）浏览器如果收到304的响应，就会从缓存中加载资源。</p> <ul><li><p><strong>两者之间对比</strong>：</p> <ul><li><strong>精确度上，Etag要优于Last-Modified</strong>。Last-Modified的时间单位是秒，如果某个文件在1秒内改变了多次，那么他们的Last-Modified其实并没有体现出来修改，但是Etag每次都会改变确保了精度；如果是负载均衡的服务器，各个服务器生成的Last-Modified也有可能不一致。</li> <li><strong>性能上，Etag要逊于Last-Modified</strong>，毕竟Last-Modified只需要记录时间，而Etag需要服务器通过算法来计算出一个hash值。</li> <li><strong>优先级上，服务器校验优先考虑Etag</strong>。</li></ul></li> <li><p><a href="https://www.cnblogs.com/lyzg/p/5125934.html" target="_blank" rel="noopener noreferrer">浏览器缓存知识小结及应用<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>[荐]</p></li></ul> <h3 id="_3-2-用户行为对浏览器缓存的影响"><a href="#_3-2-用户行为对浏览器缓存的影响" class="header-anchor">#</a> 3.2 用户行为对浏览器缓存的影响</h3> <p>1.地址栏访问，链接跳转是正常用户行为，将会触发浏览器缓存机制；</p> <p>2.F5刷新，浏览器会设置max-age=0，跳过强缓存判断，会进行协商缓存判断；</p> <p>3.ctrl+F5刷新，跳过强缓存和协商缓存，直接从服务器拉取资源。</p> <h2 id="四、cdn"><a href="#四、cdn" class="header-anchor">#</a> 四、CDN</h2> <p>提升用户的访问速度，还能节省服务器的带宽消耗，降低负载。</p> <blockquote><p>对于首次访问的加速，我们需要从网络层面进行优化，最常见的手段就是CDN（Content Delivery Network，内容分发网络）加速。<strong>通过将静态资源(例如javascript，css，图片等等）缓存到离用户很近的相同网络运营商的CDN节点上。</strong></p></blockquote> <p><img src="/assets/img/CDN.3f61e285.jpg" alt="CDN"></p> <p><strong>当请求达到CDN节点后，节点会判断自己的内容缓存是否有效</strong>。如果有效，则立即响应缓存内容给用户，从而加快响应速度。如果CDN节点的缓存失效，它会根据服务配置去我们的内容源服务器获取最新的资源响应给用户，并将内容缓存下来以便响应给后续访问的用户。</p> <p><strong>一个地区内只要有一个用户先加载资源，在CDN中建立了缓存，该地区的其他后续用户都能因此而受益</strong>。</p> <h2 id="五、dns"><a href="#五、dns" class="header-anchor">#</a> 五、DNS</h2> <h3 id="_5-1-dns预解析-dns-prefetch"><a href="#_5-1-dns预解析-dns-prefetch" class="header-anchor">#</a> 5.1 DNS预解析（dns-prefetch）</h3> <p>通过 DNS 预解析来告诉浏览器未来我们可能从某个特定的 URL 获取资源，当浏览器真正使用到该域中的某个资源时就可以尽快地完成 DNS 解析。</p> <p><strong>DNS 请求需要的带宽非常小，但是延迟却有点高，这点在手机网络上特别明显。DNS预解析 能让延迟明显减少一些，例如用户点击链接时。在某些情况下，延迟能减少一秒钟。</strong></p> <p><strong>最明显的例子，DNS预解析在某个页面中包含非常多的域名非常有效，如搜索结果页。</strong></p> <h4 id="_5-1-1-第一步-打开或关闭dns预解析"><a href="#_5-1-1-第一步-打开或关闭dns预解析" class="header-anchor">#</a> 5.1.1 <strong>第一步</strong>：打开或关闭DNS预解析</h4> <ol><li>方式一：服务器端发送 X-DNS-Prefetch-Control 报头。</li> <li>方式二：</li></ol> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!-- http-equiv 属性可用于模拟一个 HTTP 响应头 --&gt;</span>
<span class="token comment">&lt;!-- 强制打开浏览器的预解析 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>x-dns-prefetch-control<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>on<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>在一些高级浏览器中，页面中所有的超链接（<code>&lt;a&gt;</code>标签），默认打开了DNS预解析。</p> <p>但是，<strong>如果页面中采用的https协议，很多浏览器是默认关闭了超链接的DNS预解析</strong>，防止窃听者根据DNS Prefetching推断显示在HTTPS页面中超链接的主机名。</p> <h4 id="_5-1-2-第二步-对指定的域名进行dns预解析"><a href="#_5-1-2-第二步-对指定的域名进行dns预解析" class="header-anchor">#</a> 5.1.2 <strong>第二步</strong>：对指定的域名进行DNS预解析</h4> <p>如果我们将来可能从 smyhvae.com 获取图片或音频资源，那么可以在文档顶部的 标签中加入以下内容：</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dns-prefetch<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.smyhvae.com/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>当我们从该 URL 请求一个资源时，就不再需要等待 DNS 解析的过程。该技术对使用第三方资源特别有用。</p> <p>参考链接：</p> <ul><li><a href="http://bubkoo.com/2015/11/19/prefetching-preloading-prebrowsing/" target="_blank" rel="noopener noreferrer">前端性能优化 - 资源预加载<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>[荐]</li></ul> <blockquote><ul><li><p>我们在请求一些静态资源文件的时候，经常都会将这些静态资源放到二级域名下去请求访问。比如<a href="http://www.4399.com/" target="_blank" rel="noopener noreferrer">www.4399.com<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>请求static.4399.com/j/main.js，是为了</p> <ul><li><p>cookie隔离，减少主域进行http请求时携带的cookie。</p></li> <li><p>方便静态资源做CDN加速。</p></li></ul></li> <li><p>放置于独立域名下更加安全，防止非法人员进行随意引用。</p></li></ul></blockquote> <h3 id="_5-2-dns缓存"><a href="#_5-2-dns缓存" class="header-anchor">#</a> 5.2 DNS缓存</h3> <blockquote><p>参考教程: <a href="https://juejin.im/entry/5d171f3be51d45773d46865d" target="_blank" rel="noopener noreferrer">一文搞懂DNS缓存<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote></div></section> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/others/plugin.html" class="prev">
            插件开发总结
          </a></span> <span class="next"><a href="/others/photoshop.html">
            ps前端必备知识
          </a></span></p></div> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:0;" data-v-cb1513f6></ul></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/assets/js/app.9887eeef.js" defer></script><script src="/assets/js/3.eb4fdeb6.js" defer></script><script src="/assets/js/1.3b8e8362.js" defer></script><script src="/assets/js/21.c982c0e9.js" defer></script>
  </body>
</html>
